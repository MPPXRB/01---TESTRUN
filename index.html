<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>01---TESTRUN</title>
    <style>
      :root {
        color-scheme: light;
      }
      body {
        margin: 0;
        background: #f6f6f6;
        font-family: "Georgia", "Times New Roman", serif;
      }
      .toolbar {
        width: 1500px;
        margin: 24px auto 0;
        display: flex;
        justify-content: flex-end;
      }
      .toolbar button {
        border: 1px solid #111111;
        background: #ffffff;
        color: #111111;
        padding: 8px 16px;
        font-size: 16px;
        cursor: pointer;
      }
      .toolbar button:hover {
        background: #111111;
        color: #ffffff;
      }
      .frame {
        width: 1500px;
        height: 1500px;
        margin: 24px auto;
        background: #ffffff;
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);
        display: block;
      }
      @media (max-width: 1520px) {
        .frame {
          width: 95vw;
          height: 95vw;
        }
        .toolbar {
          width: 95vw;
        }
      }
    </style>
  </head>
  <body>
    <div class="toolbar">
      <button id="clear-btn" type="button">Clear</button>
    </div>
    <canvas id="board" class="frame" width="1500" height="1500"></canvas>
    <script>
      const canvas = document.getElementById("board");
      const ctx = canvas.getContext("2d");
      const clearButton = document.getElementById("clear-btn");
      const points = [];
      const pointRadius = 6;

      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        if (points.length > 1) {
          ctx.strokeStyle = "#111111";
          ctx.lineWidth = 2;
          ctx.beginPath();
          ctx.moveTo(points[0].x, points[0].y);
          for (let i = 1; i < points.length; i += 1) {
            ctx.lineTo(points[i].x, points[i].y);
          }
          ctx.stroke();
        }

        ctx.fillStyle = "#111111";
        for (const point of points) {
          ctx.beginPath();
          ctx.arc(point.x, point.y, pointRadius, 0, Math.PI * 2);
          ctx.fill();
        }
      }

      function getCanvasScale() {
        const rect = canvas.getBoundingClientRect();
        return {
          scaleX: canvas.width / rect.width,
          scaleY: canvas.height / rect.height,
          left: rect.left,
          top: rect.top,
        };
      }

      canvas.addEventListener("click", (event) => {
        const { scaleX, scaleY, left, top } = getCanvasScale();
        const x = (event.clientX - left) * scaleX;
        const y = (event.clientY - top) * scaleY;
        points.push({ x, y });
        draw();
      });

      clearButton.addEventListener("click", () => {
        points.length = 0;
        draw();
      });

      draw();
    </script>
  </body>
</html>
