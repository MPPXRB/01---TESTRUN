<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>01---TESTRUN</title>
    <style>
      :root {
        color-scheme: light;
      }
      body {
        margin: 0;
        background: #f6f6f6;
        font-family: "Georgia", "Times New Roman", serif;
      }
      .frame {
        width: 1500px;
        height: 1500px;
        margin: 24px auto;
        background: #ffffff;
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);
        display: block;
      }
      @media (max-width: 1520px) {
        .frame {
          width: 95vw;
          height: 95vw;
        }
      }
    </style>
  </head>
  <body>
    <canvas id="board" class="frame" width="1500" height="1500"></canvas>
    <script>
      const canvas = document.getElementById("board");
      const ctx = canvas.getContext("2d");
      const point = { x: 750, y: 750, r: 6 };
      let dragging = false;
      let dragOffset = { x: 0, y: 0 };

      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "#111111";
        ctx.beginPath();
        ctx.arc(point.x, point.y, point.r, 0, Math.PI * 2);
        ctx.fill();
      }

      function clamp(value, min, max) {
        return Math.max(min, Math.min(max, value));
      }

      function getCanvasScale() {
        const rect = canvas.getBoundingClientRect();
        return {
          scaleX: canvas.width / rect.width,
          scaleY: canvas.height / rect.height,
          left: rect.left,
          top: rect.top,
        };
      }

      canvas.addEventListener("mousedown", (event) => {
        const { scaleX, scaleY, left, top } = getCanvasScale();
        const x = (event.clientX - left) * scaleX;
        const y = (event.clientY - top) * scaleY;
        const dx = x - point.x;
        const dy = y - point.y;
        if (dx * dx + dy * dy <= point.r * point.r) {
          dragging = true;
          dragOffset = { x: x - point.x, y: y - point.y };
        }
      });

      canvas.addEventListener("mousemove", (event) => {
        if (!dragging) return;
        const { scaleX, scaleY, left, top } = getCanvasScale();
        const x = (event.clientX - left) * scaleX;
        const y = (event.clientY - top) * scaleY;
        point.x = clamp(x - dragOffset.x, point.r, canvas.width - point.r);
        point.y = clamp(y - dragOffset.y, point.r, canvas.height - point.r);
        draw();
      });

      window.addEventListener("mouseup", () => {
        dragging = false;
      });

      draw();
    </script>
  </body>
</html>
